managementClusterName: rancher-turtles-e2e

images:
  # Use local dev images built source tree;
  - name: "{TURTLES_IMAGE}:{TURTLES_VERSION}"
    loadBehavior: tryLoad

intervals:
  default/wait-controllers: ["15m", "10s"]
  default/wait-rancher: ["25m", "30s"]
  default/wait-snapshot: ["20m", "30s"]
  default/wait-delete-cluster: ["30m", "30s"]
  default/wait-v2prov-create: ["25m", "30s"]
  default/wait-capa-create-cluster: ["50m", "30s"]
  default/wait-capz-create-cluster: ["35m", "30s"]
  default/wait-capg-create-cluster: ["30m", "30s"]
  default/wait-capv-create-cluster: ["30m", "30s"]
  default/wait-gitpush: ["3m", "10s"]
  default/wait-consistently: ["30s", "5s"]
  default/wait-getservice: ["5m", "30s"]
  default/wait-eks-delete: ["35m", "30s"]
  default/wait-aks-delete: ["30m", "30s"]
  default/wait-gke-delete: ["35m", "30s"]
  default/wait-azure-delete: ["15m", "30s"]
  default/wait-azure: ["30m", "30s"]
  default/wait-vsphere-delete: ["20m", "30s"]
  default/wait-turtles-uninstall: ["10m", "30s"]
  default/wait-capiprovider-update: ["5m", "10s"]

variables:
  # General Configuration
  NAMESPACE: "default"
  MANAGEMENT_CLUSTER_ENVIRONMENT: "isolated-kind" # supported options: eks, isolated-kind, kind
  USE_EXISTING_CLUSTER: "false"
  SKIP_RESOURCE_CLEANUP: "false"
  SKIP_DELETION_TEST: "false"
  ARTIFACTS_FOLDER: "_artifacts"
  SECRET_KEYS: "NGROK_AUTHTOKEN,NGROK_API_KEY,RANCHER_HOSTNAME,RANCHER_PASSWORD,CAPG_ENCODED_CREDS,AWS_ACCESS_KEY_ID,AWS_SECRET_ACCESS_KEY,AZURE_SUBSCRIPTION_ID,AZURE_CLIENT_ID,AZURE_CLIENT_SECRET,AZURE_TENANT_ID,GCP_PROJECT,GCP_NETWORK_NAME,GCP_IMAGE_ID,VSPHERE_TLS_THUMBPRINT,VSPHERE_SERVER,VSPHERE_DATACENTER,VSPHERE_DATASTORE,VSPHERE_FOLDER,VSPHERE_TEMPLATE,VSPHERE_NETWORK,VSPHERE_RESOURCE_POOL,VSPHERE_USERNAME,VSPHERE_PASSWORD,VSPHERE_KUBE_VIP_IP_KUBEADM,VSPHERE_KUBE_VIP_IP_RKE2,DOCKER_REGISTRY_TOKEN,DOCKER_REGISTRY_USERNAME,DOCKER_REGISTRY_CONFIG"

  # Kubernetes Configuration
  KUBERNETES_VERSION: "v1.35.0" # Depends on kindest/node
  # Kubernetes version used for the Rancher/CAPI management cluster
  #   - Use v1.34.0 for Rancher 2.13.2 compatibility (requires < v1.35.0)
  KUBERNETES_MANAGEMENT_VERSION: "v1.34.0"
  # The cluster used in chart_upgrade must run a Kubernetes version compatible with an older version of Rancher
  KUBERNETES_MANAGEMENT_VERSION_CHART_UPGRADE: "v1.34.0"

  # RKE2 specifics
  RKE2_KUBERNETES_VERSION: "v1.35.0+rke2r1"
  RKE2_CNI: "none"

  # These two values are used for provisioning a CAPI v1.10 cluster (`v1beta1`) in the chart_upgrade test -> Kubernetes <=v1.33
  KUBERNETES_V1BETA1_VERSION: "v1.33.7"
  RKE2_V1BETA1_KUBERNETES_VERSION: "v1.33.7+rke2r1"

  # Azure Configuration
  #
  # Azure Kubeadm tests need specific k8s version.
  # This is due to the limited availability of published AMIs.
  # For example: https://portal.azure.com/#view/Microsoft_Azure_ComputeHub/ComputeHubMenuBlade/~/communityImagesBrowse
  #              Filter `capi-ubun2-2404` images. Beware: not all versions are published on all regions.
  AZURE_KUBERNETES_VERSION: "v1.35.0"
  # For AKS available versions, run: az aks get-versions --location westeurope
  AZURE_AKS_KUBERNETES_VERSION: "v1.34.2"

  # AWS Configuration
  #
  # AWS Kubeadm tests need specific k8s version.
  # Images are self-built and need versioned kubernetes components. See docs/image-builder
  AWS_KUBERNETES_VERSION: "v1.35.0"
  # EKS also needs versioned images, that may not be available for recent versions of k8s.
  # To verify availability, you can run: aws ssm get-parameter --name /aws/service/eks/optimized-ami/1.34/amazon-linux-2023/x86_64/standard/recommended/image_id
  # Recent versions will return a 'ParameterNotFound' error, preventing EKS from deploying.
  AWS_EKS_VERSION: "v1.35.0" #See: https://github.com/kubernetes-sigs/cluster-api-provider-aws/blob/main/docs/proposal/20250922-nodeadm-bootstrap.md
  AWS_REGION: "eu-west-2"
  KUBERNETES_MANAGEMENT_AWS_REGION: "eu-west-2"
  AWS_CONTROL_PLANE_MACHINE_TYPE: "t3.large"
  AWS_NODE_MACHINE_TYPE: "t3.large"
  AWS_RKE2_CONTROL_PLANE_MACHINE_TYPE: "t3.xlarge"
  AWS_RKE2_NODE_MACHINE_TYPE: "t3.xlarge"
  AWS_AMI_ID: "ami-0f19b6377d50fa855" # Private image. See docs/image-builder

  # GCP Configuration
  # Images are self-built and need versioned kubernetes components. See docs/image-builder
  GCP_KUBERNETES_VERSION: "v1.35.0"
  GCP_MACHINE_TYPE: "n1-standard-2"
  GCP_REGION: "europe-west2"
  GCP_IMAGE_ID: "cluster-api-ubuntu-2404-v1-35-0-1770652401" # Private image. See docs/image-builder
  GCP_IMAGE_ID_FORMATTED: "" #Calculated at runtime: https://www.googleapis.com/compute/v1/projects/${GCP_PROJECT_ID}/global/images/${GCP_IMAGE_ID}"

  # CLI Tool Paths
  CLUSTERCTL_BINARY_PATH: ""
  HELM_BINARY_PATH: "helm"
  HELM_EXTRA_VALUES_FOLDER: "/tmp"

  # Rancher Configuration
  RANCHER_VERSION: "v2.14.0-alpha3"
  RANCHER_REPO_NAME: "rancher-alpha"
  RANCHER_PATH: "rancher-alpha/rancher"
  RANCHER_URL: "https://releases.rancher.com/server-charts/alpha"
  RANCHER_HOSTNAME: "localhost"
  RANCHER_REPLICAS: 1
  RANCHER_PASSWORD: "rancheradmin"
  RANCHER_DEBUG: true

  # Turtles Configuration
  TURTLES_VERSION: "v0.0.1"

  TURTLES_IMAGE_REGISTRY: "ghcr.io"
  TURTLES_IMAGE_REPOSITORY: "rancher/turtles-e2e"

  TURTLES_IMAGE: "ghcr.io/rancher/turtles-e2e"
  TURTLES_PATH: "turtles/rancher-turtles"
  TURTLES_REPO_NAME: "turtles"
  TURTLES_URL: "https://rancher.github.io/turtles"

  # Providers Chart
  TURTLES_PROVIDERS: "ALL"
  TURTLES_PROVIDERS_REPO_NAME: "turtles"
  TURTLES_PROVIDERS_URL: "https://rancher.github.io/turtles"
  TURTLES_PROVIDERS_PATH: "turtles/rancher-turtles-providers"

  # External Charts and Dependencies
  CERT_MANAGER_REPO_NAME: "jetstack"
  CERT_MANAGER_URL: "https://charts.jetstack.io"
  CERT_MANAGER_PATH: "jetstack/cert-manager"

  # Ingress Configuration (Ngrok)
  NGROK_REPO_NAME: "ngrok"
  NGROK_URL: "https://charts.ngrok.com"
  NGROK_PATH: "ngrok/ngrok-operator"
  NGROK_API_KEY: ""
  NGROK_AUTHTOKEN: ""

  # Gitea Configuration
  GITEA_REPO_NAME: "gitea-charts"
  GITEA_REPO_URL: "https://dl.gitea.com/charts/"
  GITEA_CHART_NAME: "gitea"
  GITEA_CHART_VERSION: "12.4.0"
  GITEA_USER_NAME: "gitea_admin"
  GITEA_USER_PWD: "password"

  # Credentials used to pull images from docker.io
  DOCKER_REGISTRY_TOKEN: ""
  DOCKER_REGISTRY_USERNAME: ""
  # The '.dockerconfigjson' value for the dockerconfigjson Secret
  # See: https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/#registry-secret-existing-credentials
  # This can be used to configure a downstream cluster with a imagePullSecret.
  DOCKER_REGISTRY_CONFIG: ""

  VSPHERE_TEMPLATE: "turtles-ci/ubuntu-2404-kube-v1.34.1"
